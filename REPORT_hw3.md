## –í–≤–µ–¥–µ–Ω–∏–µ
–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–∫–∏–Ω–≥–∞ ML —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º MLflow. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞—É—á–Ω—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π.

## –í—ã–±—Ä–∞–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: MLflow

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ MLflow:**
- –û—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ML lifecycle
- –£–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –º–µ—Ç—Ä–∏–∫ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- Model Registry –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏ –º–æ–¥–µ–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö ML —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Python –∫–æ–¥–æ–º

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MLflow (4 –±–∞–ª–ª–∞)
![MLflow](pics/mlflow4.png)
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
MLflow —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ Poetry –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```yaml
# –í pyproject.toml
mlflow = "^2.22.2"
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ params.yaml
```yaml
mlflow:
  experiment_name: "research_publications_classification"
  run_name: "baseline_model"
  tracking_uri: "file:./mlruns"
  tags:
    project: "research_agents_hub"
    domain: "digital_pathology"
    model_type: "classification"
    data_version: "v1.0"
```

### –ó–∞–ø—É—Å–∫ tracking server
```bash
mlflow server --host 127.0.0.1 --port 3000 --backend-store-uri file:./mlruns
```

Tracking server –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:3000

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **Backend Store**: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (`./mlruns`)
- **Artifact Store**: –õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- **Model Registry**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SQLite –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–µ–ª—è–º–∏

## –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ (4 –±–∞–ª–ª–∞)

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `scripts/run_experiments.py` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è 17 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:

**–¢–∏–ø—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:**
1. **Random Forest** (5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤):
   - RF_baseline: –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - RF_more_trees: —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ—Ä–µ–≤—å–µ–≤ (200)
   - RF_deeper: —É–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ (max_depth=20)
   - RF_conservative: –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - RF_more_features: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (10k features, trigrams)

2. **Support Vector Machine** (5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤):
   - SVM_baseline: RBF —è–¥—Ä–æ, –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - SVM_linear: –ª–∏–Ω–µ–π–Ω–æ–µ —è–¥—Ä–æ
   - SVM_high_C: –≤—ã—Å–æ–∫–∞—è —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è (C=10.0)
   - SVM_low_C: –Ω–∏–∑–∫–∞—è —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è (C=0.1)
   - SVM_poly: –ø–æ–ª–∏–Ω–æ–º–∏–∞–ª—å–Ω–æ–µ —è–¥—Ä–æ

3. **Logistic Regression** (5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤):
   - LR_baseline: L2 —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è
   - LR_l1_penalty: L1 —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è
   - LR_high_reg: –≤—ã—Å–æ–∫–∞—è —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è (C=0.1)
   - LR_low_reg: –Ω–∏–∑–∫–∞—è —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è (C=10.0)
   - LR_lbfgs: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–æ–ª–≤–µ—Ä

4. **Feature Engineering** (2 –≤–∞—Ä–∏–∞–Ω—Ç–∞):
   - RF_unigrams_only: —Ç–æ–ª—å–∫–æ —É–Ω–∏–≥—Ä–∞–º–º—ã
   - LR_extended_ngrams: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ n-–≥—Ä–∞–º–º—ã (–¥–æ 4-–≥—Ä–∞–º–º)

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫
–î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ê–ª–≥–æ—Ä–∏—Ç–º –∏ –µ–≥–æ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –†–∞–∑–º–µ—Ä —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏
- Random state –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (TF-IDF, n-–≥—Ä–∞–º–º—ã)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ–ª–¥–æ–≤ –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Cross-validation accuracy (mean –∏ std)
- Test accuracy, precision, recall, F1-score
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
- –í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (–¥–ª—è –ø—Ä–∏–º–µ–Ω–∏–º—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤)

**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**
- –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å (pickle)
- –ú–µ—Ç—Ä–∏–∫–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤ YAML
- TF-IDF –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ç–æ—Ä

![MLflow](pics/mlflow5.png)

**üèÜ –õ–£–ß–®–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:**

**–ü–æ —Ç–æ—á–Ω–æ—Å—Ç–∏:**
- **–ê–ª–≥–æ—Ä–∏—Ç–º**: Random Forest —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏
- **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç**: RF_more_features
- **Test Accuracy**: 0.350 (35%)
- **F1-score**: 0.205
- **CV Accuracy**: 0.400 ¬± 0.031

**–ü–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º:**
- **Random Forest**: –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å 0.275, –ª—É—á—à–∞—è 0.350 (6 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤)
- **SVM**: –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å 0.240, –ª—É—á—à–∞—è 0.250 (5 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤)
- **Logistic Regression**: –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å 0.200, –ª—É—á—à–∞—è 0.200 (6 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤)

**üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢–û–í:**
- **–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ**: 17 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- **–£—Å–ø–µ—à–Ω—ã—Ö**: 17 (100%)
- **–ù–µ—É–¥–∞—á–Ω—ã—Ö**: 0
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~2-3 –º–∏–Ω—É—Ç—ã

### –°–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:

```python
# –ü–æ–∏—Å–∫ –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º
search_runs_by_metrics(
    experiment_name="research_publications_classification",
    metric_thresholds={"test_accuracy": (0.9, ">=")},
)

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
get_experiment_leaderboard(
    experiment_name="research_publications_classification",
    metric="test_accuracy",
    top_n=5
)
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–¥–æ–º (2 –±–∞–ª–ª–∞)

### –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
–°–æ–∑–¥–∞–Ω—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤ `researchhub/decorators.py`:

**1. –û—Å–Ω–æ–≤–Ω–æ–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞:**
```python
@mlflow_track(
    experiment_name="my_experiment",
    run_name="custom_run",
    tags={"algorithm": "RF"},
    log_params=True,
    log_artifacts=True
)
def train_model(data, params):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    return trained_model
```

**2. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```python
@log_execution_time
def preprocess_data(df):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    return processed_df
```

**3. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫:**
```python
@log_model_metrics(metrics_to_log=["accuracy", "f1_score"])
def evaluate_model(model, X_test, y_test):
    return {"accuracy": 0.95, "f1_score": 0.93}
```

**4. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:**
```python
@log_dataset_info(log_shape=True, log_missing=True, log_stats=True)
def load_data(filepath):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–∞—Ç–∞—Å–µ—Ç–µ
    return df
```

### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã
```python
with mlflow_run_context(
    experiment_name="data_preprocessing",
    run_name="feature_engineering",
    tags={"stage": "preprocessing"}
):
    # –ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ MLflow
    processed_data = preprocess_features(raw_data)
    mlflow.log_metric("features_created", processed_data.shape[1])
```

### –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏
–°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `MLflowExperimentManager` –≤ `researchhub/mlflow_utils.py`:

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏
- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–æ–≤
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- –†–∞–±–æ—Ç–∞ —Å Model Registry

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
manager = MLflowExperimentManager("file:./mlruns")

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ª—É—á—à–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
best_run = manager.get_best_run(
    experiment_name="research_publications_classification",
    metric_name="test_accuracy"
)

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–æ–≤
comparison = manager.compare_runs(
    run_ids=["run_1", "run_2", "run_3"],
    metrics=["accuracy", "f1_score", "precision"]
)

# –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
manager.export_experiment_results(
    experiment_name="research_publications_classification",
    output_file="results.csv",
    format="csv"
)
```

### Model Registry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
registry = MLflowModelRegistry()
version = registry.register_model(
    model_uri="runs:/run_id/models/model",
    model_name="publications_classifier",
    tags={"algorithm": "SVM", "version": "1.0"}
)

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–¥–∏—è–º–∏ –º–æ–¥–µ–ª–∏
registry.transition_model_version_stage(
    model_name="publications_classifier",
    version="1",
    stage="Production"
)
```

## –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã
```bash
# –ü–æ–ª–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
python scripts/run_experiments.py

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
python scripts/train_model.py \
    --input data/processed/publications_processed.csv \
    --model-output models/classifier.pkl \
    --metrics metrics.json
```

### –§–∏–∫—Å–∞—Ü–∏—è random state
–í—Å–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `random_state=42` –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å DVC
–î–∞–Ω–Ω—ã–µ –∏ –º–æ–¥–µ–ª–∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é DVC:
```bash
dvc add models/
dvc add data/processed/
git add models.dvc data/processed.dvc
```

## –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MLflow

### –î–æ—Å—Ç—É–ø –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
MLflow UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:3000

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ –∑–∞–ø—É—Å–∫–æ–≤
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Model Registry

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ –≤ UI
–ü—Ä–∏–º–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤:
```
# –ü–æ–∏—Å–∫ –ø–æ —Ç–æ—á–Ω–æ—Å—Ç–∏
metrics.test_accuracy >= 0.9

# –ü–æ–∏—Å–∫ –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É
params.algorithm = "SVM"

# –ü–æ–∏—Å–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
metrics.execution_time_seconds < 3.0

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫
metrics.test_accuracy >= 0.95 AND params.algorithm = "RandomForestClassifier"
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```
research_agets_hub/
‚îú‚îÄ‚îÄ mlruns/                          # MLflow tracking –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ 513200582704195422/         # –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ models/                     # Model Registry
‚îú‚îÄ‚îÄ experiments/                    # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ RF_baseline/
‚îÇ   ‚îú‚îÄ‚îÄ SVM_linear/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ run_experiments.py         # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ train_model.py            # –û–±—É—á–µ–Ω–∏–µ —Å MLflow
‚îú‚îÄ‚îÄ researchhub/
‚îÇ   ‚îú‚îÄ‚îÄ mlflow_utils.py           # –£—Ç–∏–ª–∏—Ç—ã MLflow
‚îÇ   ‚îî‚îÄ‚îÄ decorators.py             # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ experiments_summary.json       # –°–≤–æ–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îî‚îÄ‚îÄ params.yaml                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
```

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose 

**–®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞**
```bash
git clone <repository-url>
cd research_agets_hub
```

**–®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞**
```bash
# –ó–∞–ø—É—Å–∫ MLflow —Å–µ—Ä–≤–µ—Ä–∞
docker-compose up mlflow-server -d

# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ (–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö + –æ–±—É—á–µ–Ω–∏–µ + —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã)
docker-compose --profile training up model-training

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ: –∑–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é
docker-compose run --rm ml-app python scripts/run_experiments.py
```

**–®–∞–≥ 3: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**
- MLflow UI: http://localhost:3000
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ø–∞–ø–∫–µ `experiments/`
- –°–≤–æ–¥–∫–∞: `experiments_summary.json`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

**–ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤:**
```bash
# 1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ ArXiv
docker-compose run --rm ml-app dvc repro fetch_data

# 2. –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö  
docker-compose run --rm ml-app dvc repro preprocess

# 3. –ó–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
docker-compose run --rm ml-app python scripts/run_experiments.py

# 4. –ó–∞–ø—É—Å–∫ MLflow —Å–µ—Ä–≤–µ—Ä–∞
docker-compose up mlflow-server
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–±–µ–∑ Docker)

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -sSL https://install.python-poetry.org | python3 -

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
poetry install

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
poetry shell
```

**–ó–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞:**
```bash
# 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
dvc repro

# 2. –ó–∞–ø—É—Å–∫ MLflow —Å–µ—Ä–≤–µ—Ä–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
mlflow server --host 127.0.0.1 --port 3000 --backend-store-uri file:./mlruns &

# 3. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
python scripts/run_experiments.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–î–æ—Å—Ç—É–ø –∫ MLflow UI:**
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: http://localhost:3000
- –í—Å–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

**–§–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
```bash
experiments/                    # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∫–∞–∂–¥–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ RF_baseline/
‚îÇ   ‚îú‚îÄ‚îÄ model.pkl              # –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ metrics.json           # –ú–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ model_metadata.yaml    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ SVM_linear/
‚îî‚îÄ‚îÄ ...
experiments_summary.json       # –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
mlruns/                        # MLflow tracking –¥–∞–Ω–Ω—ã–µ
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω: ~3-5 –º–∏–Ω—É—Ç
- –¢–æ–ª—å–∫–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã: ~2-3 –º–∏–Ω—É—Ç—ã
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: ~30 —Å–µ–∫—É–Ω–¥

### üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–ï—Å–ª–∏ Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker --version
docker-compose --version

# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose down -v
docker-compose build --no-cache
docker-compose up mlflow-server
```

**–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è:**
```bash
# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
docker-compose run --rm ml-app python scripts/fetch_arxiv_data.py \
  --query "cat:eess.IV OR cat:cs.CV OR cat:q-bio.QM OR cat:cs.LG" \
  --max-results 100 \
  --output-dir data/raw
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs mlflow-server

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
docker-compose run --rm ml-app bash
```

### ‚öôÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–†–∞–∑—Ä–∞–±–æ—Ç—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º:**
```bash
# –ó–∞–ø—É—Å–∫ —Å Jupyter Lab
docker-compose --profile development up jupyter-dev

# –î–æ—Å—Ç—É–ø: http://localhost:8888
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Makefile:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
make check

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make format

# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞
make pipeline
```
